{% extends 'customers/base.html' %} {% block content %} {% load custom_tags %}
<div class="container col-md-6">
  <br />
  <div class="text-center h4">Welcome {{customer.name}}!</div>
  <br />
  {% if orders %}

  <div class="accordion">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button
          class="btn btn-primary accordion-button"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#collapseOne"
          aria-expanded="true"
          aria-controls="collapseOne"
        >
          <div class="container">
            <div class="row">
              <div class="col-sm-5">
                <div class="row h5">Order ID: #{{orders.id}}</div>
                <div class="row h5">Status: {{orders.status}}</div>
              </div>
              <div class="col-sm-auto h2">{{orders.restaurant.name}}</div>
            </div>
          </div>
        </button>
      </h2>
      <div
        id="collapseOne"
        class="accordion-collapse collapse show"
        aria-labelledby="headingOne"
        data-bs-parent="#accordionExample"
      >
        <div class="accordion-body">
          <div id="order_details">
            <div class="row">
              <div id="customer_details" class="col">
                <div class="text-left h4">YOUR DETAILS</div>
                <table class="cus_details">
                  <thead>
                    <tr>
                      <th id="cus_name" scope="col">Name: {{customer.name}}</th>
                    </tr>
                    <tr>
                      <th id="cus_address" scope="col">
                        Address: {{customer.address}}
                      </th>
                    </tr>
                    <tr>
                      <th id="cus_contact" scope="col">
                        Contact: {{customer.contact}}
                      </th>
                    </tr>
                  </thead>
                </table>
              </div>

              <div id="restaurant_details" class="col">
                <div class="text-left h4">RESTAURANT DETAILS</div>
                <table class="res_details">
                  <thead>
                    <tr>
                      <th id="res_name" scope="col">
                        Restaurant Name: {{orders.restaurant.name}}
                      </th>
                    </tr>
                    <tr>
                      <th id="res_address" scope="col">
                        Address: {{orders.restaurant.address}}
                      </th>
                    </tr>
                    <tr>
                      <th id="res_contact" scope="col">
                        Contact: {{orders.restaurant.contact}}
                      </th>
                    </tr>
                  </thead>
                </table>
              </div>
            </div>

            <hr />

            <table class="table table-striped table-hover">
              <thead>
                <tr class="table-dark">
                  <th scope="col">Dish Name</th>
                  <th scope="col">Dish Price</th>
                  <th scope="col">Dish Quantity</th>
                  <th scope="col">Total Dish Price</th>
                </tr>
              </thead>
              <tbody>
                {% for d in orderList %}
                <tr>
                  <td>{{d.dish.dish_name}}</td>

                  <td>{{d.dish.price}}</td>
                  <td>{{d.quantity}}</td>
                  <td>{{d.dish.price|multiply:d.quantity}}</td>
                </tr>
                {% endfor %}

                <tr class="table-dark">
                  <th colspan="3">Grand Total</th>
                  <th>{{total}}</th>
                </tr>
              </tbody>
            </table>
            {% else %}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center h4">NO ACTIVE ORDERS</div>
</div>
{% endif %} {% endblock %}
